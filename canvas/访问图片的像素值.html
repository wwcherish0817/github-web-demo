<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>看图片的像素</title>
		<style type="text/css">
			*{padding: 0px; margin: 0px;}
			canvas{display: inline-block;float: left;cursor: crosshair;}
			div{width: 100px;height: 100px; border: 1px dashed #222222;display: inline-block;float: left; margin-left: 10px;}
			.colorValue{display: inline-block;float: left; margin-left: 10px;}
		</style>
	</head>
	<body>
	    <canvas id='imgCanvas' width="800" height="800"></canvas>
	    <div id="colorBox" class=""></div> 
	    
	   <p class="colorValue" id="colorValue">****</p>
		<script>
			window.onload = function(){
				var canvasDom = document.getElementById("imgCanvas");//通过id找到画布
				var context = canvasDom.getContext("2d");
				var colorBox = document.getElementById('colorBox');
				var colorValue = document.getElementById('colorValue');
				var img = new Image();//创建image对象
			    img.src="img/1.jpg";
			    img.onload = function(){
			    		context.drawImage(img, 0, 0);//在画布上定义图像
			    		var imageData = context.getImageData(0, 0, 800, 800);
				    canvasDom.onclick = function(e){
					    	var x = e.clientX - canvasDom.offsetLeft;
					    	var y = e.clientY - canvasDom.offsetTop;
					    	console.log(x +","+y)
					    	
		                var pixel = imageData.data;
		                var width = imageData.width;
		                var pixelRed = ((y-1) * (width * 4)) + ((x-1) * 4);
		                var pixelGreen = pixelRed + 1;
		                var pixelBlue = pixelRed + 2;
		                var pixelAlpha = pixelRed + 3;
		                colorBox.style.backgroundColor = "rgba("+ pixel[pixelRed] +","+pixel[pixelGreen] +", "+ pixel[pixelBlue] +","+ pixel[pixelAlpha] +")";
		                colorValue.innerHTML = "rgba("+ pixel[pixelRed] +","+pixel[pixelGreen] +", "+ pixel[pixelBlue] +","+ pixel[pixelAlpha] +")";
		                
				    };
			    }
		    
			}
		    
		    
		   
		  
		</script>
	</body>
</html>
